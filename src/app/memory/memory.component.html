<app-progress-bar currentPageId="memory"></app-progress-bar>

<div class="memory-container">
  <!-- Floating Hearts Background -->
  <div class="hearts-bg">
    <span class="floating-heart">ğŸ’•</span>
    <span class="floating-heart">ğŸ’–</span>
    <span class="floating-heart">ğŸ’</span>
    <span class="floating-heart">ğŸ’—</span>
    <span class="floating-heart">ğŸŒ¹</span>
  </div>

  <div class="game-zone">
    <h1 class="title">{{ 'memory.title' | translate }}</h1>
    <p class="subtitle">{{ 'memory.subtitle' | translate: { name: valentineName } }}</p>
    
    <div class="stats">
      <span class="stat">{{ 'memory.moves' | translate }}: {{ moves() }}</span>
      <span class="stat">{{ 'memory.pairs' | translate }}: {{ matchedPairs() }}/{{ totalPairs() }}</span>
    </div>

    <div class="card-grid">
      @for (card of cards(); track card.id) {
        <button 
          class="card" 
          [class.flipped]="card.isFlipped || card.isMatched"
          [class.matched]="card.isMatched"
          (click)="flipCard(card)"
          [disabled]="card.isMatched"
        >
          <div class="card-inner">
            <div class="card-front">ğŸ’Œ</div>
            <div class="card-back">{{ card.emoji }}</div>
          </div>
        </button>
      }
    </div>

    @if (isGameComplete()) {
      <div class="completion-message">
        <h2 class="congrats">{{ 'memory.congrats' | translate }}</h2>
        <p class="completion-text">{{ 'memory.completionText' | translate: { moves: moves() } }}</p>
        <div class="completion-buttons">
          <button class="btn play-again-btn" (click)="resetGame()">{{ 'common.playAgain' | translate }}</button>
          <button class="btn continue-btn" (click)="continueToNext()">{{ 'common.continue' | translate }} ğŸ’•</button>
        </div>
      </div>
    } @else {
      <button class="btn reset-btn" (click)="resetGame()">{{ 'common.reset' | translate }}</button>
    }
  </div>
</div>
