<div class="progress-container" [class.dev-mode]="isDevMode">
  @if (isDevMode) {
    <div class="dev-indicator">ğŸ› ï¸ DEV</div>
  }
  
  <div class="progress-steps">
    @for (page of pages; track page.id; let i = $index) {
      <div 
        class="step" 
        [class.completed]="i < currentIndex"
        [class.current]="i === currentIndex"
        [class.upcoming]="i > currentIndex"
        [class.mystery]="!isDevMode && i > currentIndex"
        [class.clickable]="isDevMode"
        [attr.tabindex]="isDevMode ? 0 : null"
        [attr.role]="isDevMode ? 'button' : null"
        (click)="navigateToStep(page)"
        (keydown.enter)="navigateToStep(page)"
        (keydown.space)="navigateToStep(page)"
        [attr.title]="isDevMode ? 'Dev: Click to skip to ' + page.name : null"
      >
        @if (isDevMode || i <= currentIndex) {
          <span class="step-name">{{ 'progressBar.' + (page.id || 'home') | translate }}</span>
        }
        <div class="step-icon">
          @if (i < currentIndex) {
            <span class="checkmark">âœ“</span>
          } @else if (!isDevMode && i > currentIndex) {
            <span class="mystery-icon">?</span>
          } @else {
            <span class="emoji">{{ page.icon }}</span>
          }
        </div>
      </div>
    }
  </div>
  
  <div class="progress-bar">
    <div class="progress-fill" [style.width.%]="percentage"></div>
  </div>
</div>
